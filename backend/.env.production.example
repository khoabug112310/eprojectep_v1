# CineBook Production Environment Configuration
# Copy this file to .env for production deployment
# Make sure to update all values marked with YOUR_* placeholders

APP_NAME="CineBook"
APP_ENV=production
APP_KEY=YOUR_GENERATED_APP_KEY_HERE
APP_DEBUG=false
APP_URL=https://your-domain.com
APP_TIMEZONE="Asia/Ho_Chi_Minh"

APP_LOCALE=vi
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=vi_VN

APP_MAINTENANCE_DRIVER=file
PHP_CLI_SERVER_WORKERS=8

BCRYPT_ROUNDS=12

LOG_CHANNEL=stack
LOG_STACK="daily,stderr"
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=warning

# =============================================================================
# PRODUCTION DATABASE CONFIGURATION
# =============================================================================
DB_CONNECTION=mysql
DB_HOST=YOUR_DATABASE_HOST
DB_PORT=3306
DB_DATABASE=cinebook_production
DB_USERNAME=YOUR_DATABASE_USERNAME
DB_PASSWORD=YOUR_SECURE_DATABASE_PASSWORD

# Production Database Connection Pool Settings
DB_POOL_MIN=5
DB_POOL_MAX=50
DB_POOL_ACQUIRE_TIMEOUT=30
DB_POOL_TIMEOUT=10
DB_POOL_IDLE_TIMEOUT=600
DB_POOL_MAX_LIFETIME=7200

# Production Database Connection Settings
DB_TIMEOUT=30
DB_PERSISTENT=false
DB_COMPRESS=true
DB_SSL_VERIFY=true

# =============================================================================
# PRODUCTION SESSION CONFIGURATION
# =============================================================================
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=true
SESSION_PATH=/
SESSION_DOMAIN=.your-domain.com
SESSION_SECURE_COOKIE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax

# =============================================================================
# PRODUCTION CACHE CONFIGURATION
# =============================================================================
CACHE_STORE=redis
CACHE_PREFIX="cinebook_prod_cache"

# =============================================================================
# PRODUCTION REDIS CONFIGURATION
# =============================================================================
REDIS_CLIENT=phpredis
REDIS_HOST=YOUR_REDIS_HOST
REDIS_PASSWORD=YOUR_SECURE_REDIS_PASSWORD
REDIS_PORT=6379
REDIS_DB=0
REDIS_CACHE_DB=1
REDIS_SESSION_DB=2

# Production Redis Connection Pool Settings
REDIS_POOL_MIN=5
REDIS_POOL_MAX=50
REDIS_POOL_WAIT=3.0
REDIS_TIMEOUT=5.0
REDIS_READ_TIMEOUT=5.0
REDIS_TCP_KEEPALIVE=true
REDIS_RETRY_INTERVAL=100
REDIS_MAX_RETRIES=3
REDIS_PERSISTENT=true
REDIS_SERIALIZER=php
REDIS_COMPRESSION=lz4

# =============================================================================
# PRODUCTION SEAT LOCKING CONFIGURATION
# =============================================================================
SEAT_LOCK_TTL=900
SEAT_LOCK_CLEANUP_INTERVAL=300
SEAT_LOCK_KEY_PREFIX=seat_lock_prod
SEAT_LOCK_MAX_SEATS=10
SEAT_LOCK_RETRY_ATTEMPTS=3
SEAT_LOCK_RETRY_DELAY=100

# =============================================================================
# PRODUCTION QUEUE CONFIGURATION
# =============================================================================
BROADCAST_CONNECTION=redis
QUEUE_CONNECTION=redis
QUEUE_RETRY_AFTER=90
QUEUE_MAX_JOBS=1000
QUEUE_TIMEOUT=60

# =============================================================================
# PRODUCTION FILESYSTEM CONFIGURATION
# =============================================================================
FILESYSTEM_DISK=s3
FILESYSTEM_CLOUD=s3

# Production AWS S3 Configuration
AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_KEY
AWS_DEFAULT_REGION=ap-southeast-1
AWS_BUCKET=cinebook-production-files
AWS_USE_PATH_STYLE_ENDPOINT=false

# =============================================================================
# PRODUCTION MAIL CONFIGURATION
# =============================================================================
MAIL_MAILER=smtp
MAIL_HOST=YOUR_SMTP_HOST
MAIL_PORT=587
MAIL_USERNAME=YOUR_SMTP_USERNAME
MAIL_PASSWORD=YOUR_SMTP_PASSWORD
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="noreply@your-domain.com"
MAIL_FROM_NAME="${APP_NAME}"

# =============================================================================
# PRODUCTION SECURITY CONFIGURATION
# =============================================================================
# Rate Limiting (More restrictive in production)
THROTTLE_AUTH_ATTEMPTS=5
THROTTLE_AUTH_DECAY=60
THROTTLE_BOOKING_ATTEMPTS=10
THROTTLE_BOOKING_DECAY=60
THROTTLE_API_ATTEMPTS=100
THROTTLE_API_DECAY=1

# CSRF Protection (Strict in production)
CSRF_COOKIE_SECURE=true
CSRF_COOKIE_SAMESITE=strict

# Content Security Policy (Enabled in production)
CSP_ENABLED=true
CSP_REPORT_ONLY=false

# Input Sanitization (Enabled in production)
SANITIZE_INPUT=true
SANITIZE_HTML=true

# File Upload Security (Strict in production)
UPLOAD_MAX_SIZE=2048
UPLOAD_ALLOWED_TYPES="jpg,jpeg,png,gif,webp"
UPLOAD_SCAN_VIRUSES=true
UPLOAD_QUARANTINE_PATH="storage/quarantine"

# =============================================================================
# PRODUCTION PAYMENT CONFIGURATION
# =============================================================================
PAYMENT_GATEWAY=vnpay
PAYMENT_TIMEOUT=300
PAYMENT_CURRENCY=VND
PAYMENT_TEST_MODE=false

# VNPay Production Configuration
VNPAY_TMN_CODE=YOUR_VNPAY_TMN_CODE
VNPAY_HASH_SECRET=YOUR_VNPAY_HASH_SECRET
VNPAY_URL=https://vnpayment.vn/paymentv2/vpcpay.html

# =============================================================================
# PRODUCTION E-TICKET CONFIGURATION
# =============================================================================
TICKET_QR_SIZE=200
TICKET_QR_MARGIN=4
TICKET_TEMPLATE=production
TICKET_LOGO_PATH="images/logo-production.png"
TICKET_EXPIRES_HOURS=2

# =============================================================================
# PRODUCTION NOTIFICATION CONFIGURATION
# =============================================================================
NOTIFICATION_CHANNELS="mail,database,sms"
NOTIFICATION_QUEUE=notifications
REMINDER_HOURS_BEFORE=2
REMINDER_ENABLED=true

# SMS Configuration (for production notifications)
SMS_PROVIDER=YOUR_SMS_PROVIDER
SMS_API_KEY=YOUR_SMS_API_KEY
SMS_FROM_NUMBER=YOUR_SMS_NUMBER

# =============================================================================
# PRODUCTION MONITORING & ANALYTICS
# =============================================================================
MONITORING_ENABLED=true
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=300

# Error Tracking (Sentry for production)
ERROR_TRACKING_DSN=YOUR_SENTRY_DSN
ERROR_TRACKING_ENVIRONMENT=production

# Analytics (Google Analytics)
ANALYTICS_ENABLED=true
ANALYTICS_PROVIDER=google
ANALYTICS_TRACKING_ID=YOUR_GA_TRACKING_ID

# Application Performance Monitoring
APM_ENABLED=true
APM_SERVICE_NAME=cinebook-api
APM_ENVIRONMENT=production

# =============================================================================
# PRODUCTION API CONFIGURATION
# =============================================================================
API_VERSION=v1
API_RATE_LIMIT=100
API_RATE_LIMIT_WINDOW=1
API_PAGINATE_DEFAULT=15
API_PAGINATE_MAX=100

# CORS Configuration (Restrict to production domains)
CORS_ALLOWED_ORIGINS="https://your-domain.com,https://www.your-domain.com"
CORS_ALLOWED_METHODS="GET,POST,PUT,PATCH,DELETE,OPTIONS"
CORS_ALLOWED_HEADERS="*"
CORS_EXPOSED_HEADERS=""
CORS_MAX_AGE=86400
CORS_SUPPORTS_CREDENTIALS=true

# =============================================================================
# PRODUCTION FRONTEND INTEGRATION
# =============================================================================
FRONTEND_URL=https://your-domain.com
VITE_APP_NAME="${APP_NAME}"
VITE_API_URL="https://your-domain.com/api"
VITE_APP_ENV=production

# =============================================================================
# PRODUCTION TOOLS (Disabled)
# =============================================================================
TELESCOPE_ENABLED=false
DEBUGBAR_ENABLED=false
CLOCKWORK_ENABLED=false

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_DISK=s3
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_DATABASE=true
BACKUP_FILES=true

# =============================================================================
# CDN CONFIGURATION
# =============================================================================
CDN_ENABLED=true
CDN_URL=https://cdn.your-domain.com
CDN_ASSETS_PATH=/assets

# =============================================================================
# SEARCH ENGINE CONFIGURATION
# =============================================================================
SEARCH_ENABLED=true
SEARCH_DRIVER=elasticsearch
ELASTICSEARCH_HOST=YOUR_ELASTICSEARCH_HOST
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_INDEX=cinebook_production

# =============================================================================
# CRITICAL SECURITY REMINDERS
# =============================================================================
# IMPORTANT: Before deploying to production:
# 1. Generate a new APP_KEY: php artisan key:generate
# 2. Set APP_DEBUG=false
# 3. Update all YOUR_* placeholders with actual values
# 4. Use strong passwords (minimum 16 characters)
# 5. Enable SSL/TLS certificates
# 6. Configure firewall rules
# 7. Set up monitoring and alerting
# 8. Configure automated backups
# 9. Test disaster recovery procedures
# 10. Review all security configurations